{% extends "layout.html" %}
{% block body %}
<script type=text/javascript src="{{ url_for('static', filename='jquery.flot.js') }}"></script>
<script type=text/javascript src="{{ url_for('static', filename='jquery.flot.selection.js') }}"></script>
<script type=text/javascript>
  $(function () { updatePlot(); });

  function updatePlot() {
    $.getJSON($SCRIPT_ROOT + '/_getdata', {"hwid": "{{ hwid }}"}, function(result) {

        var datastreams = result.data.datastreams;
        var plotdivs = '';
        for(name in datastreams)
        {
          plotdivs += "<h2>"+name+"</h2>";
          plotdivs += "<div id=\""+name+"\" style=\"width:600px;height:300px;\"></div>"
        }
        $("#plots").html(plotdivs)

        for(name in datastreams)
        {
          var datastream = datastreams[name];
          $.plot($("#"+name), [datastream], {xaxis: {mode: "time"}});
        }

        //var plots = []
        //var datastreams = result.data.datastreams
        //$.plot($("#plot"), datastreams, {xaxis: { mode: "time"}} );

  
        });
  
    // Update once per second
    setTimeout("updatePlot()", 1000);
  }


</script>

<h1>Device : {{ hwid }} </h1>
<div id="plots"></div>

{% endblock %}

